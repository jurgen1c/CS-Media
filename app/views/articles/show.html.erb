<p id="notice"><%= notice %></p>
<div class="jumbotron p-0">
  <%= image_tag(@article.cover, class: 'img-fluid') %>
</div>
<div class="p-5 m-3">
  <%= image_tag(@article.author.avatar_thumbnail, class: 'rounded-circle') if @article.author.avatar.attached? %>
  <%= @article.author.name%>
  <%= nu_display(current_user, @article.author) %>
</div>
<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Article</a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Sources</a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Reviews</a>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
    <div class="p-3 m-3">
      <%= @article.title %>
      <div class="btn-group" role="group" aria-label="Basic example">
        <%=art_options(@article)%>       
        <%= vote_or_dislike_btn(@article) %>
      </div>
      Votes:
      <%= @article.votes.count %>
      Views:
      <%= @article.views %>
      <hr>
      <%= @article.body%>
    </div>
    <div>
      <%= render partial: 'comments/comment', collection: @article.comments %>

      <%= form_for(@article.comments.new, url: article_comments_path(@article)) do |form| %>
        <%= form.text_field :content, id: :comment_content, class: 'form-control', placeholder: 'Add new Comment' %>
        <%= form.submit 'Comment', class: 'btn btn-secondary' %>
      <% end %>
    </div>
  </div>
  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
    <div class="p-3 m-3">
      <%=@article.sources.first.title %>
      <hr>
      <%=@article.sources.first.body %>
    </div>
  </div>
  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
    <%= render partial: 'reviews/review', collection: @article.reviews %>

    <%= form_for(@article.reviews.new, url: article_reviews_path(@article)) do |form| %>
      <%= form.text_field :title, id: :review_title, class: 'form-control', placeholder: 'Add Title'%>
      <%= form.rich_text_area :body, id: :review_body, class: 'form-control', placeholder: 'Add Review Content' %>
      <%= form.submit 'Add Review', class: 'btn btn-secondary' %>
    <% end %>
  </div>
</div>
<%= link_to 'Edit', edit_article_path(@article) %> 
<%= link_to 'Back', articles_path %>
